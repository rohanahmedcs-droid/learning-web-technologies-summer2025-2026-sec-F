<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Believe - Donor Dashboard</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    .dash { max-width:1100px; margin:20px auto; padding:0 18px; }
    .card { background:#fff; padding:14px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.06); margin-bottom:12px; }
    .history-list { list-style:none; padding:0; }
    .history-list li { padding:8px 0; border-bottom:1px solid #f0f0f0; }

    
    .clickable-card {
      cursor: pointer;
      transition: box-shadow 0.15s ease, transform 0.1s ease;
    }
    .clickable-card:hover {
      box-shadow:0 4px 10px rgba(0,0,0,0.12);
      transform: translateY(-1px);
    }
  </style>
</head>
<body>
  <header class="top-bar"><h1 class="brand">Believe</h1></header>
  <main class="dash">
    <h2>Donor Dashboard</h2>

    <div class="card">
      <h3>Welcome, <span id="donor-name">Guest</span></h3>
      <p>Your role: Donor (demo)</p>
    </div>

    
    <div class="card clickable-card" id="donation-history-card">
      <h3>Donation History</h3>
      <ul id="history" class="history-list">
        <li>Loading...</li>
      </ul>
    </div>

    <div class="card">
      <h3>Saved NGOs</h3>
      <p>(This will show saved NGOs – demo placeholder)</p>
    </div>
  </main>

  <script>
    const session = JSON.parse(localStorage.getItem('demoSession') || 'null');
    if (session) {
      document.getElementById('donor-name').textContent = session.name;
    }

    
    const hist = JSON.parse(localStorage.getItem('donationHistory') || '[]');
    const wrap = document.getElementById('history');
    wrap.innerHTML = '';
    if (hist.length === 0) {
      wrap.innerHTML = '<li>No donations yet (demo). Use the Projects page to donate.</li>';
    } else {
      hist.slice().reverse().forEach(h => {
        const li = document.createElement('li');
        li.innerHTML =
          `<strong>৳${h.amount.toLocaleString()}</strong> — ${h.project} — ` +
          `${new Date(h.ts).toLocaleString()} <br>Receipt: ${h.id}`;
        wrap.appendChild(li);
      });
    }

    
    const historyCard = document.getElementById('donation-history-card');
    if (historyCard) {
      historyCard.addEventListener('click', function () {
        window.open(
          'history.html',
          'donationHistoryWindow',
          'width=900,height=600,scrollbars=yes'
        );
      });
    }
  </script>
</body>
</html>
